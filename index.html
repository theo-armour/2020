<!doctype html>
<html lang = "en" >
<head>
<meta charset = "utf-8" >
<meta name = "viewport" content= "width=device-width, initial-scale=1" >
<meta name = "description" content = "GitHub Repository folder and files tree view template" >
<meta name = "keywords" content = "JavaScript,GitHub,FOSS" >
<meta name = version content="2020-06-28">

<title>Theo Armour 2020</title>
<!--

	Copyright 2020 Theo Armour. MIT License

--> 
<link href="./lib/style-2020-06-24.css" rel="stylesheet" >

<style>


</style>
</head>
<body>

	<details id=detNavMenu >

		<summary id=sumNavMenu class="sumPrimary gmd-1">show || hide menu</summary>

		<nav id="navMenu" class="gmd-2">

	<header>

		<h2>
			<a href="https://github.com/theo-armour/2020/" target=_top title="Source code on GitHub" >
				<img src="https://theo-armour.github.io/2020/assets/icons/octicon.svg" >
			</a>

			<a href="" title="Click to reload this page" >
				Theo Armour 2020
				<span id=sVersion ></span>
			</a>

			<span class="info" >&#x24d8;<span id=divDescription class="infoTooltip" ></span></span>

		</h2>

	</header>

	<!-- <p>
		<button id=but onclick=setIt(); >set it</button>
	</p>
	<p>
		<label><input type=checkbox > checkbox</label>
	</p>
	<p>
		<output id=out >50</output><input type=range id="rng" oninput=out.value=this.value >
	</p> -->


	<details ontoggle="" open >

		<summary class="sumPrimary gmd-1" title="View selected items" >files in this repository</summary>

		<div class=divNavResize >

			<p>Sample files you can load, view and experiment with:</p>

			<div id=GRVdivGitHubRepoTreeView ></div>
			
			<div id=GFFdivGithubFoldersFiles></div>
			
			<div id=GFFdivFileInfo></div>
			
			<br>

		</div>

	</details>
    
	<footer>

		<hr>

		<p title="go to top of menu" style=text-align:center; >
			<a class=aDingbat href=javascript:navMenu.scrollTo(0,0); >‚ù¶</a>
		</p>

	</footer>

</nav>

</details>

<main>

<div style="height:100vh;overflow:hidden;resize:both;width:100%;">
    
    <iframe id=ifr style="height:100%;width:100%;"></iframe>

</div>

</main>


<script src="lib/grv-github-repo-tree-view/v-2020-06-28/grv-github-repo-tree-view-2020-06-28.js"></script>

<script>

const title = document.title ? document.title : location.href.split( "/" ).pop().slice( 0, - 5 ).replace( /-/g, " " );
const version = document.head.querySelector( "[ name=version ]" );
const description = document.head.querySelector( "[ name=description ]" ).content;


//sTitle.innerHTML= title;
//sVersion.innerHTML = version ? version.content : "";
divDescription.innerHTML = description;


init();

function init() {

	const urlApi = "https://api.github.com/repos/theo-armour/2020/git/trees/master?recursive=1";

    ifr.src = path = "./readme.html"

    requestFile( urlApi, GRV.onLoadTree );
    
	window.addEventListener( "hashchange", onHashChange, false );
	
	if ( window.innerWidth < 640 || window.innerHeight < 640 ) {

	//toggleNavMenu();

	} else {

	detNavMenu.open = true

	}
    
}


function onHashChange() {

    let path = "./";

    if ( location.hash.endsWith( ".md" ) ) {

        path = "./readme.html#"
    }

	ifr.src = path + location.hash.slice( 1 );
	
	
	// keeps address bar pointed to latest dev. can comment out while developing stop annoying message

	//if ( location.protocol === "https:" ) {

		//window.history.pushState( "", "", "../../../index.html" );

	//}
    
}


function requestFile( url = "https://example.com" , callback = onLoad ) {

	const urlCORS = "https://cors-anywhere.herokuapp.com/";

	xhr = new XMLHttpRequest();
	xhr.open( "GET", urlCORS + url, true );
	xhr.responseType = "json";
	xhr.onerror = ( xhr ) => console.log( "error:", xhr  );
	//xhr.onprogress = ( xhr ) => console.log( "bytes loaded:", xhr.loaded );
	xhr.onload = ( xhr ) => callback( xhr.target.response );
	xhr.send( null );

}



function onLoad( response ) {

	console.log( "response", response );

}



</script>
</body>
</html>